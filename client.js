(()=>{const t=((t,e)=>{const n=document.getElementById(t),i=n?.getAttribute(e);return i??"imTpcClientCallback"})("imTpcClient","data-callback"),e=(t=>{const e=document.cookie.split("; ");for(let n=0;n<e.length;n++){const i=e[n].split("=");if(i[0]===t)return i[1].split(":")}return[]})("im_tpc");window.imTpcData=e,"function"==typeof window[t]&&window[t](e),window.addEventListener("message",(t=>{if(t.origin===new URL("https://dmp.im-apps.net/tpc/frame.html").origin&&"tpc"===t.data?.tag){const n=(t=>t.map((t=>t.topic?t.topic:null)).filter(Boolean).sort(((t,e)=>t-e)).join("."))(t.data.tpc);if(n){const t=`${Date.now()}.${n}`,i=((t,e)=>{const n=Number(e.split(".")[0]),i=t[t.length-1],o=i?Number(i.split(".")[0]):0;return!n||n-o<="604800000"||(t.push(e),t.length>"10"&&t.shift()),t})(e,t);window.imTpcData=i,((t,e,n)=>{const i=e.join(":"),o=new Date;o.setDate(o.getDate()+n),document.cookie=`${t}=${i}; expires=${o.toUTCString()}; path=/; SameSite=Lax;`})("im_tpc",i,"10")}}})),(t=>{const e=document.createElement("iframe");e.src=t,e.style.display="none",document.body.appendChild(e)})("https://dmp.im-apps.net/tpc/frame.html")})();
